// Keep in sync with the current version
def current_version = new File('../../common/VERSION').text

apply plugin: 'java'

sourceSets {
    main {
        java {
            srcDirs = [ "src/main" ]
        }
    }
}

repositories {
    jcenter()
    maven {
        // lightstep tracer (currently not updated)
        //url  "http://dl.bintray.com/lightstep/maven"
        // opentracing
        url  "http://oss.jfrog.org/oss-snapshot-local/"
    }
}

dependencies {
    // not sure how to get rid of these three
    compile 'io.opentracing:opentracing-api:0.1.0-SNAPSHOT'
    compile 'org.apache.thrift:libthrift:0.9.2'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.7.3'

    // Include this *as well* to use the local files instead of the published version
    compile files('../../lightstep-tracer-jre/build/libs/lightstep-tracer-jre-' + current_version + '.jar')

    //compile 'com.lightstep.tracer:lightstep-tracer-jre:' + current_version
}


task runSample(type: JavaExec, dependsOn: 'classes') {
    main = 'Simple'
    classpath = sourceSets.main.runtimeClasspath
}
